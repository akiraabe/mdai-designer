# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## プロジェクト概要

統合設計書システム - 設計文書の編集・管理のためのWebアプリケーション。Markdown形式での条件記述、画像モックアップアップロード、スプレッドシート形式での項目定義編集機能を提供。

## 📚 ドキュメント構成

### 基本情報
- [📐 アーキテクチャ](./docs/01-architecture.md) - 技術スタック・システム構成・データフロー
- [🛠️ 開発ガイド](./docs/02-development-guide.md) - 開発コマンド・注意点・推奨フロー
- [🧩 コンポーネント設計](./docs/03-components.md) - UI設計・分離アーキテクチャ・CopilotKit統合

### 機能別詳細ドキュメント
- [📊 Fortune-Sheet機能](./docs/04-features/fortune-sheet.md) - スプレッドシート・編集モード・チェックリスト
- [🎨 MermaidEditor改善](./docs/04-features/mermaid-editor.md) - UI/UX改善・エラー処理・リサイズ機能
- [🤖 AI修正提案システム](./docs/04-features/ai-modification.md) - 自然言語修正・バックアップ・確認プロセス
- [💬 ChatPanel分離](./docs/04-features/chat-panel.md) - 責任境界・専用Panel・技術革新
- [🔗 @メンション機能](./docs/04-features/model-driven.md) - Model Driven Architecture・設計書間連携
- [📦 プロジェクトエクスポート](./docs/04-features/project-export.md) - 一括管理・完全復元・チーム協業
- [📚 設計書タイプシステム](./docs/04-features/document-types.md) - 複数タイプ・状態管理・UI制御

### 運用・保守
- [🔧 トラブルシューティング](./docs/05-troubleshooting.md) - 既知問題・対策・デバッグ手法
- [🌐 MCP統合](./docs/06-mcp-integration.md) - 準拠性・実装状況・改善計画

## 🚀 クイックスタート

```bash
npm install          # 初回セットアップ
npm run dev          # 開発サーバー起動 (Vite)
npm run build        # 本番ビルド (TypeScript コンパイル + Vite ビルド)
npm run lint         # ESLint実行
```

## 🎯 重要な開発原則

### 日本語環境
- UIは完全に日本語で構築
- ドキュメント管理は日本語環境向け
- コンソールログも日本語併記

### コードスタイル
- **重要**: コメントは追加しない（明示的に求められない限り）
- 既存ライブラリの確認を必須とする
- 既存のコンポーネントパターンに従う
- セキュリティベストプラクティスを遵守

### 推奨開発フロー
1. **新機能追加**: 対応するカスタムフックに処理追加→UIコンポーネント更新
2. **バグ修正**: 該当するフック・コンポーネントを特定→局所的修正
3. **ライブラリ変更**: Common系コンポーネントの実装のみ変更

## 🔄 最新の実装状況

### ✅ 完全実装済み
- **画面設計書**: 表示条件・項目定義・画面イメージ・補足説明（青系統UI）
- **データモデル設計書**: Mermaid ER図・補足説明（オレンジ系統UI）
- **AI修正提案システム**: 自然言語修正・安全バックアップ・確認プロセス
- **@メンション機能**: 設計書間参照・Model Driven生成
- **プロジェクト管理**: 一括エクスポート・インポート・完全復元

### 🟡 開発中
- **API設計書**: 基本UI実装済み（機能開発中）
- **MCP標準準拠**: 基本機能動作中（完全準拠検証中）

### 🔒 準備中
- **データベース設計書**: 設計検討中

## 💡 重要な技術的教訓

### シンプル・イズ・ベスト
複雑な最適化より確実な動作を優先。React開発では無限ループ・フックス順序等の典型的問題に注意。

### 責任境界の明確化
ビッグスイッチパターンによる完全分離アーキテクチャ。各ドキュメントタイプに特化した専用Viewで保守性・拡張性を確保。

### 段階的実装
基盤構築→UI実装→問題解決→最終完成の段階的アプローチで技術的課題を確実に解決。

---

**詳細な実装情報は上記リンクの各ドキュメントを参照してください。**